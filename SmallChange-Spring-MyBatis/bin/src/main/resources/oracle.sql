
DROP TABLE TRADE_HISTORY;
DROP TABLE ORDER_DATA;
DROP TABLE PORTFOLIO_HOLDING;
DROP TABLE PORTFOLIO;
DROP TABLE INVESTMENT_PREFERENCE;
DROP TABLE CLIENT;

--------------------------------------------------------
--  DDL for Table CLIENT
--------------------------------------------------------

  CREATE TABLE  "CLIENT" 
   (	"CLIENT_ID" NUMBER(19,0), 
	"NAME" VARCHAR2(30 BYTE), 
	"PHONE" VARCHAR2(10 BYTE), 
	"EMAIL" VARCHAR2(30 BYTE), 
	"POSTAL_CODE" VARCHAR2(10 BYTE), 
	"COUNTRY" VARCHAR2(4 BYTE), 
	"ID_TYPE" VARCHAR2(10 BYTE), 
	"ID_VALUE" VARCHAR2(15 BYTE), 
	"PASSWORD" VARCHAR2(256 BYTE),
    "DOB" DATE
   );
--------------------------------------------------------
--  DDL for Table INVESTMENT_PREFERENCE
--------------------------------------------------------

  CREATE TABLE  "INVESTMENT_PREFERENCE" 
   (	"CLIENT_ID" NUMBER(19,0), 
	"INCOME_CATEGORY" VARCHAR2(20 BYTE), 
	"LENGTH_OF_INVESTMENT" VARCHAR2(10 BYTE), 
	"INVESTMENT_PURPOSE" VARCHAR2(30 BYTE), 
	"RISK_TOLERANCE" VARCHAR2(13 BYTE)
   );


--------------------------------------------------------
--  DDL for Table ORDER_DATA
--------------------------------------------------------

  CREATE TABLE  "ORDER_DATA" 
   (	"ORDER_ID" VARCHAR2(36 BYTE), 
	"INSTRUMENT_ID" VARCHAR2(10 BYTE), 
	"QUANTITY" NUMBER(19,0), 
	"TARGET_PRICE" NUMBER(19,4), 
	"DIRECTION" CHAR(1 BYTE), 
	"CLIENT_ID" NUMBER(19,0), 
	"PORTFOLIO_ID" VARCHAR2(36 BYTE)
   );

--------------------------------------------------------
--  DDL for Table PORTFOLIO
--------------------------------------------------------

  CREATE TABLE  "PORTFOLIO" 
   (	"PORTFOLIO_ID" VARCHAR2(36 BYTE), 
	"CLIENT_ID" NUMBER(19,0), 
	"NAME" VARCHAR2(30 BYTE), 
	"BALANCE" NUMBER(19,4), 
	"P_CATEGORY" VARCHAR2(20 BYTE)
   );


--------------------------------------------------------
--  DDL for Table PORTFOLIO_HOLDING
--------------------------------------------------------

  CREATE TABLE  "PORTFOLIO_HOLDING" 
   (	"PORTFOLIO_ID" VARCHAR2(36 BYTE), 
	"INSTRUMENT_ID" VARCHAR2(10 BYTE), 
	"QUANTITY" NUMBER(19,0), 
	"INVESTMENT_PRICE" NUMBER(19,4), 
	"ADDED_AT" TIMESTAMP (6), 
	"LAST_UPDATE_AT" TIMESTAMP (6)
   );

--------------------------------------------------------
--  DDL for Table TRADE_HISTORY
--------------------------------------------------------

  CREATE TABLE  "TRADE_HISTORY" 
   (	"TRADE_ID" VARCHAR2(36 BYTE), 
	"ORDER_ID" VARCHAR2(36 BYTE), 
	"INSTRUMENT_ID" VARCHAR2(10 BYTE), 
	"QUANTITY" NUMBER(19,0), 
	"EXECUTION_PRICE" NUMBER(19,4), 
	"DIRECTION" CHAR(1 BYTE), 
	"CLIENT_ID" NUMBER(19,0), 
	"PORTFOLIO_ID" VARCHAR2(36 BYTE), 
	"CASH_VALUE" NUMBER(19,4), 
	"TRANSACTION_AT" TIMESTAMP (6)
   );


--------------------------------------------------------
--  Constraints for Table INVESTMENT_PREFERENCE
--------------------------------------------------------

  ALTER TABLE  "INVESTMENT_PREFERENCE" ADD PRIMARY KEY ("CLIENT_ID");


--------------------------------------------------------
--  Constraints for Table CLIENT
--------------------------------------------------------

  ALTER TABLE  "CLIENT" ADD PRIMARY KEY ("CLIENT_ID");
  ALTER TABLE  "CLIENT" ADD UNIQUE ("NAME");
  ALTER TABLE  "CLIENT" ADD UNIQUE ("PHONE");
  ALTER TABLE  "CLIENT" ADD UNIQUE ("EMAIL");
  ALTER TABLE  "CLIENT" ADD CONSTRAINT "UKCIDVAL" UNIQUE ("ID_TYPE", "ID_VALUE");
  ALTER TABLE  "CLIENT" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE  "CLIENT" MODIFY ("PHONE" NOT NULL ENABLE);
  ALTER TABLE  "CLIENT" MODIFY ("EMAIL" NOT NULL ENABLE);
  ALTER TABLE  "CLIENT" MODIFY ("POSTAL_CODE" NOT NULL ENABLE);
  ALTER TABLE  "CLIENT" MODIFY ("COUNTRY" NOT NULL ENABLE);
  ALTER TABLE  "CLIENT" MODIFY ("ID_TYPE" NOT NULL ENABLE);
  ALTER TABLE  "CLIENT" MODIFY ("ID_VALUE" NOT NULL ENABLE);
  ALTER TABLE  "CLIENT" MODIFY ("PASSWORD" NOT NULL ENABLE);

--------------------------------------------------------
--  Constraints for Table PORTFOLIO_HOLDING
--------------------------------------------------------

  ALTER TABLE  "PORTFOLIO_HOLDING" MODIFY ("QUANTITY" NOT NULL ENABLE);
  ALTER TABLE  "PORTFOLIO_HOLDING" MODIFY ("INVESTMENT_PRICE" NOT NULL ENABLE);
  ALTER TABLE  "PORTFOLIO_HOLDING" MODIFY ("ADDED_AT" NOT NULL ENABLE);
  ALTER TABLE  "PORTFOLIO_HOLDING" MODIFY ("LAST_UPDATE_AT" NOT NULL ENABLE);
  ALTER TABLE  "PORTFOLIO_HOLDING" ADD CONSTRAINT "PK_PH" PRIMARY KEY ("PORTFOLIO_ID", "INSTRUMENT_ID");


--------------------------------------------------------
--  Constraints for Table TRADE_HISTORY
--------------------------------------------------------

  ALTER TABLE  "TRADE_HISTORY" ADD PRIMARY KEY ("TRADE_ID");

--------------------------------------------------------
--  Constraints for Table ORDER_DATA
--------------------------------------------------------

  ALTER TABLE  "ORDER_DATA" ADD PRIMARY KEY ("ORDER_ID");

--------------------------------------------------------
--  Constraints for Table PORTFOLIO
--------------------------------------------------------

  ALTER TABLE  "PORTFOLIO" ADD PRIMARY KEY ("PORTFOLIO_ID");

--------------------------------------------------------
--  Ref Constraints for Table INVESTMENT_PREFERENCE
--------------------------------------------------------

  ALTER TABLE  "INVESTMENT_PREFERENCE" ADD CONSTRAINT "FK_IP_TO_CL" FOREIGN KEY ("CLIENT_ID")
	  REFERENCES  "CLIENT" ("CLIENT_ID") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table ORDER_DATA
--------------------------------------------------------

  ALTER TABLE  "ORDER_DATA" ADD CONSTRAINT "FK_O_TO_P" FOREIGN KEY ("PORTFOLIO_ID")
	  REFERENCES  "PORTFOLIO" ("PORTFOLIO_ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE  "ORDER_DATA" ADD CONSTRAINT "FK_O_TO_CL" FOREIGN KEY ("CLIENT_ID")
	  REFERENCES  "CLIENT" ("CLIENT_ID") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table PORTFOLIO
--------------------------------------------------------

  ALTER TABLE  "PORTFOLIO" ADD CONSTRAINT "FK_PORT_TO_CL" FOREIGN KEY ("CLIENT_ID")
	  REFERENCES  "CLIENT" ("CLIENT_ID") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table PORTFOLIO_HOLDING
--------------------------------------------------------

  ALTER TABLE  "PORTFOLIO_HOLDING" ADD CONSTRAINT "FK_PH_TO_P" FOREIGN KEY ("PORTFOLIO_ID")
	  REFERENCES  "PORTFOLIO" ("PORTFOLIO_ID") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table TRADE_HISTORY
--------------------------------------------------------

  ALTER TABLE  "TRADE_HISTORY" ADD CONSTRAINT "FK_TRADE_TO_P" FOREIGN KEY ("PORTFOLIO_ID")
	  REFERENCES  "PORTFOLIO" ("PORTFOLIO_ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE  "TRADE_HISTORY" ADD CONSTRAINT "FK_TRADE_TO_CL" FOREIGN KEY ("CLIENT_ID")
	  REFERENCES  "CLIENT" ("CLIENT_ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE  "TRADE_HISTORY" ADD CONSTRAINT "FK_TRADE_TO_ORDER" FOREIGN KEY ("ORDER_ID")
	  REFERENCES  "ORDER_DATA" ("ORDER_ID") ON DELETE CASCADE ENABLE;


Insert into CLIENT (CLIENT_ID,NAME,PHONE,EMAIL,POSTAL_CODE,COUNTRY,ID_TYPE,ID_VALUE,PASSWORD,DOB) values (1463465354,'Liki','9978675123','lok@gmail.com','879808','IN','PAN','BGHPK7852D','NIKHIL@123',TO_DATE('2022-10-12','YYYY-MM-DD'));
Insert into CLIENT (CLIENT_ID,NAME,PHONE,EMAIL,POSTAL_CODE,COUNTRY,ID_TYPE,ID_VALUE,PASSWORD,DOB) values (346346435,'NIKHIL V','9878675645','nikhil@gmail.com','879809','IN','PAN','BGHPK7652D','NIKHIL@123',TO_DATE('2022-10-12','YYYY-MM-DD'));
Insert into CLIENT (CLIENT_ID,NAME,PHONE,EMAIL,POSTAL_CODE,COUNTRY,ID_TYPE,ID_VALUE,PASSWORD,DOB) values (1728765503,'NIKHIL V 2','9878675647','nik@gmail.com','879809','IN','PAN','BGHPK7652W','NIKHIL@123',TO_DATE('2022-10-12','YYYY-MM-DD'));


Insert into INVESTMENT_PREFERENCE (CLIENT_ID,INCOME_CATEGORY,LENGTH_OF_INVESTMENT,INVESTMENT_PURPOSE,RISK_TOLERANCE) values (346346435,'T20K_T40K','T5Y_T7Y','To future','AGGRESSIVE');



Insert into PORTFOLIO (PORTFOLIO_ID,CLIENT_ID,NAME,BALANCE,P_CATEGORY) values ('f8c3de3d-1fea-4d7c-a8b0-29f63c4c3121',346346435,'NIKHIL Second PORTFOLIO',10000,'BROKERAGE-B');
Insert into PORTFOLIO (PORTFOLIO_ID,CLIENT_ID,NAME,BALANCE,P_CATEGORY) values ('f8c3de3d-1fea-4d7c-a8b0-29f63c4c3454',346346435,'NIKHIL FIRST PORTFOLIO',10000,'BROKERAGE');
Insert into PORTFOLIO (PORTFOLIO_ID,CLIENT_ID,NAME,BALANCE,P_CATEGORY) values ('f8c3de3d-1fea-4d7c-a8b0-29f63c4c3414',1728765503,'NIKHIL V Main PORTFOLIO',8900,'BROKERAGE');


Insert into PORTFOLIO_HOLDING (PORTFOLIO_ID,INSTRUMENT_ID,QUANTITY,INVESTMENT_PRICE,ADDED_AT,LAST_UPDATE_AT) values ('f8c3de3d-1fea-4d7c-a8b0-29f63c4c3454','Q345',10,876.97,to_timestamp('29-SEP-99 11.59.59.000000000 PM','DD-MON-RR HH.MI.SSXFF AM'),to_timestamp('29-SEP-99 11.59.59.000000000 PM','DD-MON-RR HH.MI.SSXFF AM'));
Insert into PORTFOLIO_HOLDING (PORTFOLIO_ID,INSTRUMENT_ID,QUANTITY,INVESTMENT_PRICE,ADDED_AT,LAST_UPDATE_AT) values ('f8c3de3d-1fea-4d7c-a8b0-29f63c4c3454','Q347',10,876.97,to_timestamp('29-SEP-99 11.59.59.000000000 PM','DD-MON-RR HH.MI.SSXFF AM'),to_timestamp('29-SEP-99 11.59.59.000000000 PM','DD-MON-RR HH.MI.SSXFF AM'));

Insert into PORTFOLIO_HOLDING (PORTFOLIO_ID,INSTRUMENT_ID,QUANTITY,INVESTMENT_PRICE,ADDED_AT,LAST_UPDATE_AT) values ('f8c3de3d-1fea-4d7c-a8b0-29f63c4c3414','T67899',100,87.97,to_timestamp('29-SEP-99 11.59.59.000000000 PM','DD-MON-RR HH.MI.SSXFF AM'),to_timestamp('29-SEP-99 11.59.59.000000000 PM','DD-MON-RR HH.MI.SSXFF AM'));
Insert into PORTFOLIO_HOLDING (PORTFOLIO_ID,INSTRUMENT_ID,QUANTITY,INVESTMENT_PRICE,ADDED_AT,LAST_UPDATE_AT) values ('f8c3de3d-1fea-4d7c-a8b0-29f63c4c3414','T67894',100,101.97,to_timestamp('29-SEP-99 11.59.59.000000000 PM','DD-MON-RR HH.MI.SSXFF AM'),to_timestamp('29-SEP-99 11.59.59.000000000 PM','DD-MON-RR HH.MI.SSXFF AM'));

Insert into ORDER_DATA (ORDER_ID,INSTRUMENT_ID,QUANTITY,TARGET_PRICE,DIRECTION,CLIENT_ID,PORTFOLIO_ID) values ('a8c3de3d-1fea-4d7c-a8b0-29f63c4c3455','Q34F',10,10.65,'B',346346435,'f8c3de3d-1fea-4d7c-a8b0-29f63c4c3454');
Insert into TRADE_HISTORY (TRADE_ID,ORDER_ID,INSTRUMENT_ID,QUANTITY,EXECUTION_PRICE,DIRECTION,CLIENT_ID,PORTFOLIO_ID,CASH_VALUE,TRANSACTION_AT) values ('v8c3de3d-1fea-4d7c-a8b0-29f63c4c34bb','a8c3de3d-1fea-4d7c-a8b0-29f63c4c3455','Q34F',10,106.5,'B',346346435,'f8c3de3d-1fea-4d7c-a8b0-29f63c4c3454',112.45,to_timestamp('30-SEP-99 01.02.59.000000000 AM','DD-MON-RR HH.MI.SSXFF AM'));

commit;